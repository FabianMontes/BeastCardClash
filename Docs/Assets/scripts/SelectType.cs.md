# `SelectType.cs`

## 1. Propósito General
El script `SelectType.cs` es responsable de gestionar la visibilidad y la interacción del panel de selección de tipo elemental para el primer "Figther" (luchador) del jugador durante la fase de combate `SelecCombat`. Permite al jugador elegir un elemento para su criatura y comunica esta selección al sistema central de combate.

## 2. Componentes Clave

### `SelectType`
-   **Descripción:** Esta clase hereda de `MonoBehaviour` y actúa como un controlador para un panel de interfaz de usuario (UI) que permite al jugador seleccionar un tipo elemental para una criatura. Su función principal es determinar cuándo este panel debe ser visible y procesar la selección del jugador, interactuando con otros sistemas clave del juego como `Figther` y `Combatjudge`.
-   **Variables Públicas / Serializadas:**
    Este script no expone variables públicas ni serializadas directamente en el Inspector de Unity. Internamente, mantiene una referencia privada a un componente `Figther` llamado `figther`, el cual se obtiene del GameObject padre en tiempo de ejecución.
-   **Métodos Principales:**
    -   `void Start()`: Este método se invoca una vez al inicio del ciclo de vida del script. Su propósito es inicializar la referencia al componente `Figther` buscando en los GameObjects padres (`GetComponentInParent<Figther>()`). Inmediatamente después de obtener esta referencia, llama a `Visib(false)` para asegurar que el panel de selección de tipo elemental esté oculto por defecto al inicio del juego o de la escena.
    -   `void Update()`: Se ejecuta en cada fotograma. Su lógica principal es monitorear el estado actual del combate para decidir cuándo mostrar el panel de selección de tipo. Utiliza la clase `Combatjudge` para consultar la fase actual del juego (`GetSetMoments()`), verificar si es el turno del jugador (`FocusONTurn()`), y si el `Figther` asociado a este script es el primero del jugador (identificado por `figther.indexFigther == 0`). Si todas estas condiciones se cumplen, el panel se hace visible.
    -   `private void Visib(bool isVisible)`: Este es un método auxiliar privado que controla la visibilidad del panel de selección de tipo. Accede al primer hijo del GameObject al que está adjunto este script (presumiblemente el panel que contiene los botones de selección) y activa o desactiva su estado llamando a `gameObject.SetActive(isVisible)`.
    -   `public void PickElement(int element)`: Este método público está diseñado para ser invocado externamente, típicamente por un evento de UI, como el `onClick` de un botón. Recibe un entero que representa el tipo elemental seleccionado. Internamente, intenta registrar esta selección con el sistema `Combatjudge` a través de `Combatjudge.combatjudge.pickElement((Element)element)`. Si la selección es exitosa (es decir, `pickElement` devuelve `true`), el método llama a `Visib(false)` para ocultar el panel, indicando que la selección ha sido completada.
-   **Lógica Clave:**
    La lógica central del script reside en su ciclo de `Update`, que actúa como un "observador de estado". El script espera la fase de combate `SelecCombat` y que sea el turno del jugador con el primer `Figther` para activar su interfaz. Una vez visible, el jugador puede hacer una selección a través del método `PickElement`, el cual delega la validación y el procesamiento de la selección al sistema `Combatjudge`. Si la selección es válida, el panel se oculta, completando su ciclo de interacción para esa ronda.

## 3. Dependencias y Eventos
-   **Componentes Requeridos:** Este script no utiliza el atributo `[RequireComponent]`. Sin embargo, depende de la existencia de un componente `Figther` en uno de sus GameObjects padres en la jerarquía, el cual es buscado y asignado en el método `Start`.
-   **Eventos (Entrada):** El método `public void PickElement(int element)` está diseñado para ser un receptor de eventos. Aunque el script no se suscribe internamente a ningún `UnityEvent`, se espera que este método sea invocado por eventos externos, como los `onClick()` de botones en la interfaz de usuario, donde cada botón pasaría el valor entero correspondiente a un tipo elemental.
-   **Eventos (Salida):** Este script no emite sus propios `UnityEvent`s o `Action`s para notificar a otros sistemas. En su lugar, interactúa directamente con el sistema `Combatjudge` invocando su método `pickElement()`.